---
import '../styles/global.css';
---

<html lang='en'>
	<head>
		<meta charset='utf-8' />
		<meta
			name='viewport'
			content='width=device-width'
		/>
		<meta
			name='generator'
			content={Astro.generator}
		/>
		<title>Document</title>
	</head>
	<body>
		Index page
		<p>
			<label for='theme-select'>Pick your color scheme</label>
			<select
				name='theme'
				id='theme-select'
				onchange='setLocalStorageTheme()'
			>
				<option
					value='system-theme'
					id='system-theme'
					selected
					>System</option
				>
				<option
					value='light-theme'
					id='light-theme'
					>Light</option
				>
				<option
					value='dark-theme'
					id='dark-theme'
					>Dark</option
				>
			</select>
		</p>
		<script is:inline>
			function applyLocalStorageTheme() {
				const localStorageTheme = localStorage?.getItem('theme') ?? '';
				localStorageTheme === 'light-theme'
					? (document.querySelector('#theme-select').selectedIndex =
							1)
					: localStorageTheme === 'dark-theme'
						? (document.querySelector(
								'#theme-select'
							).selectedIndex = 2)
						: (document.querySelector(
								'#theme-select'
							).selectedIndex = 0);
			}
			applyLocalStorageTheme();

			function setLocalStorageTheme() {
				const localTheme =
					document.querySelector('#theme-select').value;
				localStorage.setItem('theme', localTheme);
			}
		</script>
	</body>
</html>
